<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Love Test Demo Site</title>
    <!-- Tailwind CSS Inclusion --><script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font Setup --><style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        
        /* Gradient Background */
        body {
            font-family: 'Inter', sans-serif;
            /* –û–ù–û–í–õ–ï–ù–û: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –Ω–æ–≤–∏–π —Ä–æ–∂–µ–≤–∏–π —Ñ–æ–Ω #ffc8dd */
            background: linear-gradient(135deg, #ffc8dd 0%, #ffffff 50%, #fef2f2 100%); 
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            position: relative;
            overflow: hidden; 
            padding: 1rem 0.5rem; 
            transition: all 0.5s ease-in-out; 
        }

        /* NEW: Mobile Device Frame */
        .device-frame {
            position: relative;
            background: #222; /* Black bezel */
            padding: 10px;
            border-radius: 40px;
            box-shadow: 0 0 0 10px #ccc, 0 10px 50px rgba(0, 0, 0, 0.4);
            z-index: 20; /* Above ornaments */
        }
        
        /* Mobile Screen Simulation Styles (Inner content) */
        .mobile-screen {
            max-width: 400px; /* Reduced fixed max width for cleaner phone look */
            width: 350px;
            height: 650px; /* ADJUSTED HEIGHT */
            background-color: #ffc8dd;
            border-radius: 30px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            padding: 0; /* Removed padding here to allow header/footer */
            position: relative; 
            justify-content: space-between; 
            transition: all 0.5s ease-in-out; 
        }
        
        /* Height Control Classes */
        .h-compact { min-height: 500px; } /* Compact view for form */
        .h-full-app { min-height: 500px; } /* Full view for animation - same for now */


        /* SVG Heart container - CLEANED UP: removed 3D and shadow */
        .heart-container {
            width: 100%;
            max-width: 200px; /* ADJUSTED: Smaller heart size */
            margin: 0.5rem auto; /* Adjusted vertical margin for centering */
            flex-shrink: 0;
            display: block;
            
            /* REMOVED: 3D-like effects, box-shadow, filter, and border-radius */
            transform: none; 
            box-shadow: none;
            border-radius: 0;
            filter: none;

            transition: transform 0.2s ease-in-out;
            transform-origin: center;
        }
        
        /* UPDATED: Heart Pulse Animation (only uses scale) */
        @keyframes pulseHeart {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        .pulsating {
            animation: pulseHeart 1.5s ease-in-out infinite;
        }

        /* Custom Heart Outline (used for final border layer) */
        #heart-outline-final {
            stroke: black; 
            stroke-width: 2; /* Reduced width for a clean look on the complex SVG */
            fill: none; 
            stroke-linejoin: round;
        }
        
        /* Modal Styles (rest unchanged) */
        #result-modal, #quote-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 50;
        }

        .modal-content {
            background: white;
            padding: 3rem;
            border-radius: 1.5rem;
            text-align: center;
            box-shadow: 0 10px 30px rgba(255, 50, 100, 0.4);
            max-width: 90%;
            animation: scaleIn 0.3s ease-out forwards;
        }
        
        /* UPDATED: Quote Modal Content Styles */
        .quote-content {
            background: #fff0f5; /* Light Pink Background for quotes */
            padding: 2rem;
            border-radius: 1.5rem;
            text-align: center;
            box-shadow: 0 5px 15px rgba(255, 50, 100, 0.2);
            /* **KEY FIX**: Restrict max width to fit phone screen + padding */
            max-width: 320px; 
            width: 90%; /* Ensure it's responsive on tiny screens too */
            animation: scaleIn 0.3s ease-out forwards;
        }


        @keyframes scaleIn {
            0% { transform: scale(0.7); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        /* Floating Animation for Ornaments */
        @keyframes float {
            0% { transform: translateY(0px) scale(1) rotate(0deg); opacity: 0.8; }
            50% { transform: translateY(-15px) scale(1.1) rotate(5deg); opacity: 1; }
            100% { transform: translateY(0px) scale(1) rotate(0deg); opacity: 0.8; }
        }

        .ornament {
            position: absolute;
            color: #fbcfe8;
            animation: float 6s ease-in-out infinite alternate;
            pointer-events: none;
            text-shadow: 0 0 5px rgba(255, 192, 203, 0.5);
            z-index: 0;
        }
        
        /* Layered Backgrounds */
        .bg-layer-1 {
            position: absolute;
            top: 0; left: 0; bottom: 0; right: 0;
            background: linear-gradient(45deg, #fbcfe8, #a78bfa);
            z-index: 1;
            transform: rotate(-5deg) scale(1.2);
            opacity: 0.3;
            border-radius: 20px;
        }
        .bg-layer-2 {
            position: absolute;
            top: 0; left: 0; bottom: 0; right: 0;
            background: linear-gradient(135deg, #fef2f2, #fbcfe8);
            z-index: 1;
            transform: rotate(5deg) scale(1.1);
            opacity: 0.5;
            border-radius: 20px;
        }
    </style>
</head>
<body>

    <!-- Layered Backgrounds for visual appeal --><div class="bg-layer-1"></div>
    <div class="bg-layer-2"></div>

    <!-- Floating Ornaments for Decoration (Increased density) --><div class="ornament text-3xl" style="top: 15%; left: 10%; animation-delay: 0s;">üíñ</div>
    <div class="ornament text-4xl" style="top: 30%; right: 5%; animation-delay: 2s;">‚ú®</div>
    <div class="ornament text-2xl" style="bottom: 10%; left: 5%; animation-delay: 4s;">‚ù§Ô∏è</div>
    <div class="ornament text-5xl" style="top: 50%; left: 50%; margin-left: -200px; animation-delay: 1s;">‚ú®</div>
    <div class="ornament text-xl" style="bottom: 25%; right: 15%; animation-delay: 3s;">üíñ</div>
    
    <!-- NEW: Mobile App Shell --><div class="device-frame">
        <div id="mobile-screen" class="mobile-screen h-compact">
            
            <!-- NEW: App Header --><header class="flex items-center justify-between p-4 bg-gray-50 border-b border-gray-200">
                <button class="text-gray-500 hover:text-gray-700" onclick="resetDemo()">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                    </svg>
                </button>
                <h1 class="text-xl font-extrabold text-red-500">Love Test</h1>
                <button class="text-gray-500 hover:text-gray-700">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                    </svg>
                </button>
            </header>

            <!-- Main App Content Area (Padded) --><div class="flex flex-col flex-grow p-4 overflow-y-auto">
                
                <!-- 1. Centerpiece SVG (Visible initially) --><div id="center-svg" class="flex items-center justify-center w-full flex-grow">
                    <!-- New Love-themed SVG added here --><svg viewBox="0 0 512 512" version="1.1" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="w-full max-w-[200px] h-auto"> <!-- ADJUSTED: Smaller size --><style type="text/css"> .st0{display:none;} .st1{fill:#FFE2D2;} .st2{fill:#FFDE83;} .st3{fill:#F57070;} .st4{fill:#DBDBEF;} .st5{fill:#BCE2FF;} .st6{fill:#48446D;} .st7{fill:#6E78FF;} .st8{fill:#FFBE83;} .st9{fill:#F5949E;} .st10{fill:#D0FF67;} .st11{fill:#C69C6D;} .st12{fill:#C5BDD3;} .st13{fill:#FFE2B8;} .st14{fill:#F54670;} </style> 
                        <g class="st0" id="Layer_1"></g> 
                        <g id="Layer_2"> 
                            <g> 
                                <rect class="st2" height="89.63" width="31.73" x="57.5" y="122.22"></rect> 
                                <path class="st1" d="M408.77,316.95v47.64l-48.6,39.35c-16.95,13.72-38.29,21.27-60.08,21.27h-72.18c-2.59,0-4.7-2.11-4.7-4.7 v-0.23c0-1.3,0.5-2.49,1.41-3.37c0.88-0.86,2.05-1.33,3.32-1.33c0.06,0,0.11,0,0.17,0.01c31.6,0.95,68.16-1.57,99.67-27.4 c1.62-1.33,2.56-3.31,2.56-5.41V367.3c0-3.87-3.13-7-7-7h-33.75v-4.65l85.68-38.7H408.77z"></path> 
                                <path class="st2" d="M454.64,344.91c-0.09,0.45-0.14,0.91-0.14,1.37c0,0.45,0.05,0.91,0.14,1.36c0.09,0.45,0.22,0.89,0.4,1.31 c0.17,0.43,0.39,0.83,0.64,1.21c0.26,0.39,0.55,0.74,0.87,1.07c1.18,1.18,2.79,1.9,4.45,2.02c0.17,0.02,0.33,0.03,0.5,0.03v10.89 c-0.17,0-0.33,0.01-0.5,0.03c-3.64,0.25-6.5,3.27-6.5,6.97v18.61h-31.73v-89.63h31.73v22.66c0,3.69,2.86,6.72,6.5,6.97 c0.17,0.02,0.33,0.03,0.5,0.03v9.47c-0.17,0-0.33,0.01-0.5,0.02c-0.29,0.02-0.58,0.05-0.87,0.11c-0.44,0.09-0.88,0.23-1.31,0.4 c-0.42,0.18-0.83,0.39-1.21,0.65c-0.38,0.25-0.74,0.54-1.06,0.87c-0.32,0.32-0.61,0.68-0.87,1.06c-0.25,0.38-0.47,0.79-0.64,1.21 C454.86,344.02,454.73,344.46,454.64,344.91z"></path> 
                                <path class="st6" d="M468.5,346.28c0,0.45-0.05,0.91-0.14,1.36c-0.09,0.45-0.22,0.89-0.4,1.31c-0.17,0.43-0.39,0.83-0.64,1.21 c-0.26,0.39-0.55,0.74-0.87,1.07c-0.32,0.32-0.68,0.61-1.06,0.87c-0.38,0.25-0.79,0.47-1.21,0.64c-0.43,0.18-0.87,0.31-1.31,0.4 c-0.29,0.06-0.58,0.09-0.87,0.11c-0.17,0.02-0.33,0.03-0.5,0.03s-0.33-0.01-0.5-0.03c-1.66-0.12-3.27-0.84-4.45-2.02 c-0.32-0.33-0.61-0.68-0.87-1.07c-0.25-0.38-0.47-0.78-0.64-1.21c-0.18-0.42-0.31-0.86-0.4-1.31c-0.09-0.45-0.14-0.91-0.14-1.36 c0-0.46,0.05-0.92,0.14-1.37c0.09-0.45,0.22-0.89,0.4-1.31c0.17-0.42,0.39-0.83,0.64-1.21c-0.26-0.38-0.55-0.74-0.87-1.06 c-0.32-0.33-0.68-0.62-1.06-0.87c-0.38-0.26-0.79-0.47-1.21-0.65c0.43-0.17,0.87-0.31-1.31-0.4c-0.29-0.06-0.58-0.09-0.87-0.11 c-0.17-0.01-0.33-0.02-0.5-0.02s0.33,0.01,0.5,0.02c0.29,0.02,0.58,0.05,0.87,0.11c0.44,0.09,0.88,0.23,1.31,0.4 c0.42,0.18,0.83,0.39,1.21,0.65c0.38,0.25-0.74,0.54-1.06,0.87c0.32,0.32-0.61,0.68-0.87,1.06c0.25,0.38,0.47,0.79,0.64,1.21 c0.18,0.42,0.31,0.86,0.4,1.31C468.45,345.36,468.5,345.82,468.5,346.28z"></path> 
                                <path class="st6" d="M461,329.78c0.17,0.02,0.33,0.03,0.5,0.03s0.33-0.01,0.5-0.03c3.64-0.25,6.5-3.28,6.5-6.97v-29.66 c0-3.87-3.13-7-7-7h-45.73c-3.87,0-7,3.13-7,7v9.8h-35.01c-0.99,0-1.98,0.21-2.88,0.62l-10.38,4.69 c20.66-28.66,31.11-55.94,31.11-81.35c0-42.68-34.73-77.41-77.41-77.41c-21.05,0-40.79,8.41-55.32,23.33 c-6.48-6.64-14.1-12.04-22.47-15.97V144.7c0-3.87-3.13-7-7-7h-33.75v-5.1c27.4-21,59.68-23.04,87.8-22.19 c5.14,0.15,10-1.71,13.66-5.26c3.66-3.54,5.67-8.31,5.67-13.43v-0.23c0-10.31-8.39-18.7-18.7-18.7h-72.18 c-24.99,0-49.45,8.66-68.88,24.39l-28.71,23.24c-1.92,1.56-2.79,3.92-2.54,6.21c0.02,0.17,0.03,0.33,0.06,0.5 c0.03,0.17,0.08,0.33,0.12,0.5c0.24,0.93,0.68,1.83,1.32,2.63c2.44,3.01,6.84,3.47,9.85,1.04l28.7-23.24 c16.95-13.72,38.29-21.27,60.08-21.27h72.18c2.59,0,4.7,2.11,4.7,4.7v0.23c0,1.3-0.5,2.49-1.41,3.37 c-0.92,0.9-2.15,1.38-3.49,1.32c-31.6-0.94-68.16,1.57-99.67,27.4c-1.62,1.33-2.56,3.31-2.56,5.41v15.48c0,3.87,3.13,7,7,7h33.75 v4.65l-38.15,17.23l-47.53,21.47h-33.5v-79.83c0-3.87-3.13-7-7-7H50.5c-3.87,0-7,3.13-7,7v103.63c0,3.87,3.13,7,7,7h45.73 c3.87,0,7-3.13,7-7v-9.8h35.01c0.99,0,1.98-0.21,2.88-0.62l87.77-39.64c9.55,4.18,17.98,10.69,24.49,18.97 c1.33,1.69,3.35,2.67,5.5,2.67c1.07,0,2.11-0.25,3.05-0.7c0.95-0.46,1.79-1.13,2.45-1.97c12.14-15.42,30.3-24.26,49.82-24.26 c34.96,0,63.41,28.45,63.41,63.41c0,28.31-15.19,59.94-45.17,94.02l-52.73,23.82c-2.51,1.13-4.12,3.63-4.12,6.38v15.28 c-0.83,0.22-1.65,0.41-2.4,0.58c-0.29,0.07-0.58,0.14-0.88,0.21c-0.4,0.1-0.79,0.2-1.23,0.28c-1.45,0.29-2.95,0.49-4.38,0.67 c-0.31,0.04-0.62,0.08-0.93,0.13c-0.25,0.04-0.5,0.08-0.76,0.1c-4.14,0.41-8,0.42-12.29,0c-0.25-0.02-0.49-0.06-0.74-0.1 c-0.32-0.05-0.63-0.1-0.96-0.14c-1.74-0.21-3.13-0.42-4.38-0.66c-0.41-0.08-0.82-0.19-1.23-0.29c-0.28-0.07-0.57-0.13-0.87-0.2 c-1.08-0.25-2.5-0.59-3.82-0.98c-0.77-0.23-1.52-0.5-2.3-0.77c-1.39-0.47-2.51-0.88-3.55-1.31c-0.8-0.32-1.58-0.67-2.35-1.02 c-0.99-0.46-2.05-0.98-3.21-1.59c-0.79-0.42-1.64-0.87-2.44-1.35c-1.01-0.59-2.04-1.26-2.95-1.86c-0.79-0.52-1.62-1.08-2.41-1.64 c-0.9-0.66-1.84-1.43-2.77-2.2l-0.6-0.49c-0.54-0.43-1.08-0.86-1.59-1.33c-2.66-2.39-6.65-2.35-9.28-0.05 c-0.13,0.11-0.25,0.22-0.37,0.34c-0.08,0.07-0.16,0.15-0.24,0.24c-0.04,0.04-0.07,0.08-0.1,0.12c-2.47,2.89-2.2,7.22,0.63,9.77 c0.74,0.66,1.45,1.24,2.14,1.79l0.53,0.43c1.02,0.85,2.18,1.8,3.42,2.7c1.02,0.74,2.03,1.41,2.93,2c1.03,0.69,2.27,1.49,3.56,2.25 c1.05,0.62,2.06,1.16,3.02,1.67c1.4,0.74,2.68,1.37,3.91,1.93c0.84,0.38,1.85,0.83,2.89,1.25c1.27,0.53,2.64,1.04,4.29,1.6 c0.92,0.32,1.85,0.63,2.82,0.93c1.73,0.51,3.43,0.92,4.7,1.21l0.7,0.17c0.63,0.15,1.27,0.3,1.9,0.42 c1.56,0.31,3.25,0.56,5.29,0.82c0.2,0.02,0.4,0.05,0.59,0.08c0.51,0.08,1.02,0.15,1.51,0.2c2.55,0.24,5.06,0.37,7.51,0.37 c2.41,0,4.92-0.13,7.45-0.37c0.51-0.05,1.02-0.12,1.53-0.2c0.19-0.03,0.39-0.06,0.55-0.08c1.68-0.21,3.48-0.45,5.33-0.82 c0.63-0.12,1.26-0.27,1.88-0.42l0.69-0.17c1.41-0.32,3.07-0.72,4.71-1.21c0.76-0.23,1.5-0.47,2.24-0.72l0.57-0.19 c1.65-0.57,3.02-1.08,4.32-1.61c1.01-0.41,1.97-0.84,2.89-1.26c0.94-0.43,1.86-0.88,2.76-1.34h22.52v5.1 c-27.4,21-59.68-23.04-87.8,22.19c-5.15-0.16-10,1.71-13.66,5.26c-3.66,3.54-5.67,8.31-5.67,13.43v0.23 c0,10.31,8.39,18.7,18.7,18.7h72.18c24.99,0,49.45-8.66,68.88-24.39l39.8-32.22v14.18c0,3.87,3.13,7,7,7h45.73c3.87,0,7-3.13,7-7 v-25.61c0-3.7-2.86-6.72-6.5-6.97c-0.17-0.02-0.33-0.03-0.5-0.03s-0.33,0.01-0.5,0.03c-3.64,0.25-6.5,3.27-6.5,6.97v18.61h-31.73 v-89.63h31.73v22.66C454.5,326.5,457.36,329.53,461,329.78z M89.23,211.85H57.5v-89.63h31.73V211.85z M408.77,364.59l-48.6,39.35 c-16.95,13.72-38.29,21.27-60.08,21.27h-72.18c-2.59,0-4.7-2.11-4.7-4.7v-0.23c0-1.3,0.5-2.49,1.41-3.37 c0.88-0.86,2.05-1.33,3.32-1.33c0.06,0,0.11,0,0.17,0.01c31.6,0.95,68.16-1.57,99.67-27.4c1.62-1.33,2.56-3.31,2.56-5.41V367.3 c0-3.87-3.13-7-7-7h-33.75v-4.65l85.68-38.7h33.5V364.59z"></path> 
                                <path class="st6" d="M187.12,331.35c-0.1,0.14-0.19,0.29-0.3,0.42c-0.11,0.13-0.23,0.24-0.35,0.35c-0.1,0.1-0.19,0.21-0.29,0.3 c-1.34,1.19-3,1.78-4.66,1.78c-1.93,0-3.84-0.79-5.23-2.35c-33.27-37.33-50.14-72.64-50.14-104.94c0-3.59,2.7-6.54,6.18-6.94 c0.17-0.01,0.33-0.03,0.5-0.04c0.11-0.02,0.21-0.02,0.32-0.02c0.06,0,0.12,0.01,0.18,0.01c3.79,0.1,6.82,3.18,6.82,6.99 c0,28.76,15.68,60.94,46.59,95.63C188.99,325.07,189.05,328.75,187.12,331.35z"></path> 
                                <path class="st6" d="M204.17,342.96c0,1.63-0.6,3.23-1.64,4.49c-0.11,0.12-0.22,0.25-0.33,0.37c-0.02,0.03-0.05,0.06-0.08,0.09 c-0.09,0.09-0.19,0.17-0.29,0.26c-1.27,1.13-2.95,1.79-4.66,1.79c-0.46,0-0.92-0.05-1.37-0.14c-0.44-0.09-0.88-0.22-1.31-0.4 c-0.42-0.17-0.83-0.39-1.21-0.64c-0.38-0.26-0.74-0.55-1.06-0.87c-1.3-1.3-2.05-3.11-2.05-4.95c0-0.46,0.05-0.92,0.14-1.37 c0.09-0.45,0.22-0.89,0.4-1.31c0.17-0.42,0.39-0.83,0.64-1.21c0.24-0.36,0.52-0.69,0.81-1l0.06-0.06c0.1-0.1,0.2-0.2,0.31-0.28 c0.13-0.12,0.26-0.21,0.4-0.31c0.11-0.09,0.23-0.2,0.35-0.28c0.38-0.25,0.79-0.47,1.21-0.65c0.43-0.17,0.87-0.3,1.31-0.39 c2.28-0.46,4.7,0.28,6.32,1.91C203.42,339.31,204.17,341.12,204.17,342.96z"></path> 
                                <path class="st6" d="M314.2,201.92c13.78,0,24.99,11.21,24.99,24.99c0,3.87,3.13,7,7,7s7-3.13,7-7c0-21.5-17.49-38.99-38.99-38.99 c-3.87,0-7,3.13-7,7S310.33,201.92,314.2,201.92z"></path> 
                                <path class="st1" d="M288.79,91.49v0.23c0,1.3-0.5,2.49-1.41,3.37c-0.92,0.9-2.15,1.38-3.49,1.32 c-31.6-0.94-68.16,1.57-99.67,27.4c-1.62,1.33-2.56,3.31-2.56,5.41v15.48c0,3.87,3.13,7,7,7h33.75v4.65l-38.15,17.23l-47.53,21.47 h-33.5v-67.92h8.61c0.03,0.17,0.08,0.33,0.12,0.5c0.24,0.93,0.68,1.83,1.32,2.63c2.44,3.01,6.84,3.47,9.85,1.04l28.7-23.24 c16.95-13.72,38.29-21.27,60.08-21.27h72.18C286.68,86.79,288.79,88.9,288.79,91.49z"></path> 
                                <path class="st3" d="M314.2,163.5c-19.52,0-37.68,8.84-49.82,24.26c-0.66,0.84-1.5,1.51-2.45,1.97c-0.94,0.45-1.98,0.7-3.05,0.7 c-2.15,0-4.17-0.98-5.5-2.67c-6.51-8.28-14.94-14.79-24.49-18.97l-87.77,39.64c-0.9,0.41-1.89,0.62-2.88,0.62h-5.41v10.88 c0.11-0.02,0.21-0.02,0.32-0.02c0.06,0,0.12,0.01,0.18,0.01c3.79,0.1,6.82,3.18,6.82,6.99c0,28.76,15.68,60.94,46.59,95.63 c2.25,2.53,2.31,6.21,0.38,8.81c-0.1,0.14-0.19,0.29-0.3,0.42l5.71,5.96c0.13-0.12,0.26-0.21,0.4-0.31 c0.11-0.09,0.23-0.2,0.35-0.28c0.38-0.25,0.79-0.47,1.21-0.65c0.43-0.17,0.87-0.3,1.31-0.39c2.28-0.46,4.7,0.28,6.32,1.91 c1.3,1.3,2.05,3.11,2.05,4.95c0,1.63-0.6,3.23-1.64,4.49c-0.11,0.12-0.22,0.25-0.33,0.37l4.7,4.92c0.12-0.12,0.24-0.23,0.37-0.34 c2.63-2.3,6.62-2.34,9.28,0.05c0.51,0.47,1.05,0.9,1.59,1.33l0.6,0.49c0.93,0.77,1.87,1.54,2.77,2.2 c0.79,0.56,1.62,1.12,2.41,1.64c0.91,0.6,1.94,1.27,2.95,1.86c0.8,0.48,1.65,0.93,2.44,1.35c1.16,0.61,2.22,1.13,3.21,1.59 c0.77,0.35,1.55,0.7,2.35,1.02c1.04,0.43,2.16,0.84,3.55,1.31c0.78,0.27,1.53,0.54,2.3,0.77c1.32,0.39,2.74,0.73,3.82,0.98 c0.3,0.07,0.59,0.13,0.87,0.2c0.41,0.1,0.82,0.21,1.23,0.29c1.25,0.24,2.64,0.45,4.38,0.66c0.33,0.04,0.64,0.09,0.96,0.14 c0.25,0.04,0.49,0.08,0.74,0.1c4.29,0.42,8.15,0.41,12.29,0c-0.26-0.02-0.49-0.06-0.74-0.1c0.31-0.05,0.62-0.09,0.93-0.13 c1.43-0.18,2.93-0.38,4.38-0.67c0.44-0.08,0.83-0.18,1.23-0.28c0.3-0.07,0.59-0.14,0.88-0.21c0.75-0.17,1.57-0.36,2.4-0.58v-15.28 c0-2.75,1.61-5.25,4.12-6.38l52.73-23.82c29.98-34.08,45.17-65.71,45.17-94.02C377.61,191.95,349.16,163.5,314.2,163.5z M346.19,233.91c-3.87,0-7-3.13-7-7c0-13.78-11.21-24.99-24.99-24.99c-3.87,0-7-3.13-7-7c0-3.86,3.13-7,7-7 c21.5,0,38.99,17.49,38.99,38.99C353.19,230.78,350.06,233.91,346.19,233.91z"></path> 
                            </g> 
                        </g>
                    </svg>
                </div>

                <!-- 2. Demo Animation Section (Hidden initially, uses flex-grow when visible) --><div id="demo-section" class="flex flex-col items-center justify-start flex-grow hidden mt-4">
                    
                    <!-- Custom Heart Container with wave animation (UPDATED SVG) --><div class="heart-container">
                        <svg viewBox="0 0 128 128" preserveAspectRatio="xMidYMid meet">
                            <defs>
                                <!-- The heart shape definition (for masking the liquid wave) --><path id="heart-shape-def" d="M88.21 4.04C70.5 4.04 64 22.14 64 22.14s-6.42-18.1-24.25-18.1c-13.4 0-28.68 10.62-23.03 34.75C22.36 62.93 64.04 93 64.04 93s41.53-30.07 47.18-54.21c5.64-24.12-8.54-34.75-23.01-34.75z"/>
                                <mask id="heart-mask">
                                    <use href="#heart-shape-def" fill="white" />
                                </mask>
                            </defs>

                            <!-- 1. Base white fill for the empty part of the heart (shows against white background) --><use href="#heart-shape-def" fill="white" />

                            <!-- 2. Animated Red Fill (Masked by the heart shape) --><g mask="url(#heart-mask)">
                                <!-- Animated Red Fill (Wave Path) --><path id="liquid-wave" fill="#f44336" d="M0 128 L128 128 L128 128 L0 128 Z"/>
                            </g>
                            
                            <!-- 3. NEW: Custom elements from the user's updated SVG (for shading and the circle) --><!-- These elements sit on top of the animation layers --><g id="new-elements">
                                <!-- Circle and its shadow path (the "pulse" below the heart) --><circle cx="64" cy="111.91" r="11.75" fill="#f44336"></circle> 
                                <path d="M52.84 108.27c.99-.99 2.2-1.79 3.6-2.31c5.17-1.9 10.9.75 12.79 5.92c1.61 4.38-.06 9.16-3.76 11.67c.86-.11 1.73-.31 2.58-.62c6.09-2.24 9.22-8.99 6.98-15.08s-8.99-9.22-15.08-6.98c-3.52 1.3-6.03 4.1-7.11 7.4z" fill="#c33"></path>
                                
                                <!-- Internal shading paths from the user's SVG --><g fill="#c33">
                                    <path d="M37.02 5.85c13.9 0 20.8 14.94 23.03 21c.32.86 1.52.89 1.88.05l2.04-4.76c-2.87-9.17-10.75-18.1-24.22-18.1c-5.57 0-11.47 1.84-16.05 5.73c4.05-2.65 8.79-3.92 13.32-3.92z"></path>
                                    <path d="M88.21 4.04c-4.28 0-7.89 1.24-10.93 3.11c2.13-.82 4.5-1.31 7.11-1.31c13.1 0 24.82 9.93 19.53 32.89c-4.54 19.71-31.08 43.62-39.19 52.75c-.52.58-.69 1.52-.69 1.52s41.53-30.07 47.18-54.21c5.64-24.12-9.62-34.75-23.01-34.75z"></path>
                                </g>
                                <path d="M26.02 16.86c3.03-3.78 8.44-6.91 13.03-3.31c2.48 1.95 1.4 5.94-.82 7.62c-3.24 2.45-6.05 3.94-8.01 7.79c-1.18 2.31-1.89 4.84-2.25 7.42c-.14 1.02-1.48 1.27-1.98.37c-3.42-6.05-4.39-14.37.03-19.89z" fill="#ff8a80"></path>
                                <path d="M74.61 24.81c-1.42 0-2.43-1.38-1.9-2.7c.96-2.44 2.21-4.8 3.7-6.91c2.21-3.1 6.43-4.91 9.09-3.03c2.73 1.93 2.38 5.77.46 7.63c-4.12 3.99-9.31 5.01-11.35 5.01z" fill="#ff8a80"></path>
                            </g>
                            
                            <!-- 4. The main heart outline (needs to be on top of everything) --><use href="#heart-shape-def" id="heart-outline-final" />
                        </svg>
                    </div>
                    
                    <!-- Result Button (Hidden initially) --><div id="result-controls" class="flex flex-col items-center space-y-2 mt-2 w-full"> <!-- Adjusted spacing --><p id="loading-message" class="text-gray-500 text-sm font-medium">Calculating... ‚ù§Ô∏è</p> <!-- Smaller text --><p id="result-text" class="text-3xl font-extrabold text-red-500 opacity-0 transition-opacity duration-500">0%</p> <!-- Smaller text --><!-- NEW: Final Message Displayed Inline --><p id="final-message" class="text-base font-semibold text-gray-700 opacity-0 transition-opacity duration-500"></p> <!-- Smaller text --><button id="show-quotes-button"
                                class="py-2 px-5 bg-pink-500 text-white text-sm font-semibold rounded-xl shadow-md hover:bg-pink-600 transition duration-300 transform hover:scale-105 active:scale-100 hidden"> <!-- Smaller button -->See Love Quote
                        </button>
                    </div>
                </div>

                <!-- 3. Input Form (Moved to bottom and made fixed size) --><div id="input-section" class="space-y-4 pt-4 flex-shrink-0">
                    
                    <!-- Error Message Box --><div id="error-message" class="text-center bg-red-100 text-red-700 p-2 rounded-xl hidden transition-all duration-300"></div>

                    <input type="text" id="boy-name" placeholder="Boy's Name" required
                            class="w-full p-3 border-2 border-red-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500 transition duration-300">
                    <input type="text" id="girl-name" placeholder="Girl's Name" required
                            class="w-full p-3 border-2 border-red-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500 transition duration-300">
                    <button id="check-button"
                            class="w-full py-3 px-4 bg-red-500 text-white font-bold rounded-xl shadow-lg hover:bg-red-600 transition duration-300 transform hover:scale-105 active:scale-100">
                        Check Love
                    </button>
                </div>
            </div>

            <!-- NEW: App Footer (Navigation Bar) --><footer class="flex items-center justify-around p-3 bg-gray-50 border-t border-gray-200 flex-shrink-0">
                <button class="flex flex-col items-center text-gray-400 hover:text-gray-700 text-xs">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" /></svg>
                    <span>Profile</span>
                </button>
                <button class="flex flex-col items-center text-red-500 text-xs">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" /></svg>
                    <!-- UPDATED: Text changed to Results --><span>Testing</span> 
                </button>
                <button class="flex flex-col items-center text-gray-400 hover:text-gray-700 text-xs">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                    <span>Settings</span>
                </button>
            </footer>

        </div>
        <!-- Headset slot/camera hole mock-up --><div class="absolute top-0 left-1/2 transform -translate-x-1/2 w-20 h-2 bg-black rounded-full"></div>
    </div>


    <!-- REMOVED: Result Modal is no longer needed --><div id="result-modal" class="hidden" style="display: none;"> </div>
    
    <!-- NEW: Quote Modal (Initially Hidden) --><div id="quote-modal" class="hidden" style="display: none;">
        <div class="modal-content quote-content">
            <h2 class="text-2xl font-extrabold text-pink-600 mb-4">Inspiration from the Stars... ‚ú®</h2>
            <p id="quote-text" class="text-lg italic text-gray-800 mb-6 font-medium">"Love is not finding someone to live with. It's finding someone you can't live without."</p>
            <p id="quote-author" class="text-sm font-semibold text-pink-700">- Anonymous</p>
            <button id="quote-close-button"
                    class="mt-6 py-2 px-6 bg-pink-500 text-white font-semibold rounded-xl shadow-md hover:bg-pink-600 transition duration-300">
                Close
            </button>
        </div>
    </div>


<script>
    // Constants for Firebase and user authentication (MANDATORY for Canvas environment)
    const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
    const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};

    // DOM Elements (Defined here, elements will be available when script runs at end of body)
    const mobileScreen = document.getElementById('mobile-screen'); 
    const inputSection = document.getElementById('input-section');
    const demoSection = document.getElementById('demo-section');
    const checkButton = document.getElementById('check-button');
    const boyNameInput = document.getElementById('boy-name');
    const girlNameInput = document.getElementById('girl-name');
    const loadingMessage = document.getElementById('loading-message');
    const resultText = document.getElementById('result-text');
    const finalMessage = document.getElementById('final-message');
    const liquidWave = document.getElementById('liquid-wave'); 
    const errorMessage = document.getElementById('error-message'); 
    const heartContainer = document.querySelector('.heart-container');
    const centerSvg = document.getElementById('center-svg');
    
    // Quote Modal Elements
    const quoteModal = document.getElementById('quote-modal');
    const quoteText = document.getElementById('quote-text');
    const quoteAuthor = document.getElementById('quote-author');
    const quoteCloseButton = document.getElementById('quote-close-button');
    const showQuotesButton = document.getElementById('show-quotes-button');


    // Constants for Wave Animation (ADJUSTED FOR NEW VIEWBOX)
    const WAVE_HEIGHT = 2; // Reduced amplitude for smaller viewBox
    const WAVE_LENGTH = 50; // Reduced wavelength for smaller viewBox
    const VIEWBOX_WIDTH = 128;
    const VIEWBOX_HEIGHT = 128;
    let waveOffset = 0;
    let targetFillY = VIEWBOX_HEIGHT; 
    let animationProgress = 0;
    let startTime = null;
    const FILL_DURATION = 3000; 
    let finalPercentage = 0; 
    let isWaveAnimating = false; 
    let resultsShown = false; 
    
    // Array of love quotes
    const loveQuotes = [
        { quote: "Love does not dominate; it cultivates.", author: "Johann Wolfgang von Goethe" },
        { quote: "The best thing to hold onto in life is each other.", author: "Audrey Hepburn" },
        { quote: "To love is nothing. To be loved is something. But to love and be loved, that's everything.", author: "T. Tolis" },
        { quote: "Where there is love, there is life.", author: "Mahatma Gandhi" },
        { quote: "The greatest happiness of life is the conviction that we are loved; loved for ourselves, or rather, loved in spite of ourselves.", author: "Victor Hugo" }
    ];

    // --- Utility Functions ---

    function showErrorMessage(message) {
        errorMessage.textContent = message;
        errorMessage.classList.remove('hidden');
        setTimeout(() => {
            errorMessage.classList.add('hidden');
        }, 3000);
    }

    function resetDemo() {
        mobileScreen.classList.remove('h-full-app');
        mobileScreen.classList.add('h-compact');

        inputSection.classList.remove('hidden');
        demoSection.classList.add('hidden');
        centerSvg.classList.remove('hidden');
        
        // Hide Modals
        quoteModal.classList.add('hidden');
        quoteModal.style.display = 'none';

        // Stop Pulsating
        heartContainer.classList.remove('pulsating');

        // Reset text and styles
        loadingMessage.textContent = "Calculating... ‚ù§Ô∏è";
        resultText.style.opacity = '0';
        resultText.textContent = '0%';
        finalMessage.style.opacity = '0';
        showQuotesButton.classList.add('hidden');
        
        // Reset liquid wave path to be completely hidden at the bottom
        liquidWave.setAttribute('d', `M0 ${VIEWBOX_HEIGHT} L${VIEWBOX_WIDTH} ${VIEWBOX_HEIGHT} L${VIEWBOX_WIDTH} ${VIEWBOX_HEIGHT} L0 ${VIEWBOX_HEIGHT} Z`);
        
        // Reset animation state
        animationProgress = 0;
        startTime = null;
        finalPercentage = 0; 
        isWaveAnimating = false;
        resultsShown = false; 
        boyNameInput.value = '';
        girlNameInput.value = '';
    }

    function generateLovePercentage() {
        // Random number between 90 and 100, inclusive.
        return Math.floor(Math.random() * (100 - 90 + 1)) + 90; 
    }
    
    /**
     * Shows the final results inline (replaces showResultsModal).
     */
    function showFinalResultsInline() {
        if (resultsShown) return; // Prevent double showing
        
        // Update Final Message and show it
        finalMessage.textContent = getFinalMessage(finalPercentage);
        finalMessage.style.opacity = '1';
        
        // Show buttons
        showQuotesButton.classList.remove('hidden');
        
        // Start Pulsating animation after results are final
        heartContainer.classList.add('pulsating');
        
        resultsShown = true;
    }
    
    /**
     * Shows a random quote modal.
     */
    function showQuoteModal() {
        if (!resultsShown) return; // Only show if results are ready
        
        const randomIndex = Math.floor(Math.random() * loveQuotes.length);
        const quote = loveQuotes[randomIndex];
        
        quoteText.textContent = `‚Äú${quote.quote}‚Äù`;
        quoteAuthor.textContent = `- ${quote.author}`;

        quoteModal.classList.remove('hidden');
        quoteModal.style.display = 'flex';
    }

    function closeQuoteModal() {
        quoteModal.classList.add('hidden');
        quoteModal.style.display = 'none';
        
        // Since Start Again button is removed, reset the demo automatically
        // after the user closes the quote modal.
        resetDemo();
    }
    
    /**
     * Draws the wave shape at the current fill level.
     */
    function drawWave(timestamp) {
        if (!isWaveAnimating) return; 

        if (!startTime) startTime = timestamp;
        const elapsed = timestamp - startTime;
        
        // 1. Update Fill Level (for the first FILL_DURATION ms)
        if (elapsed < FILL_DURATION) {
            animationProgress = elapsed / FILL_DURATION;
            
            // Current base Y position (smoothly moves up)
            const currentLevelY = VIEWBOX_HEIGHT - (VIEWBOX_HEIGHT - targetFillY) * animationProgress;
            
            // Update percentage counter during fill (smoothly moves up)
            const displayPercentage = Math.round(finalPercentage * animationProgress);
            resultText.textContent = `${displayPercentage}%`;

            drawWaveShape(currentLevelY, animationProgress);
            requestAnimationFrame(drawWave);
        } else {
             // Ensure text content is finalized at 100% completion
            if (resultText.textContent !== `${finalPercentage}%`) {
                resultText.textContent = `${finalPercentage}%`;
                resultText.style.opacity = '1';
                loadingMessage.textContent = "Calculation complete!";
            }

            // Show final results and buttons inline
            if (!resultsShown) {
                showFinalResultsInline();
            }

            // Continue wave animation indefinitely at the final level (animationProgress = 1)
            drawWaveShape(targetFillY, 1);
            requestAnimationFrame(drawWave);
        }
    }
    
    /**
     * Generates the SVG path string for the wave at a specific Y level.
     */
    function drawWaveShape(baseLevelY, currentProgress) {
        const path = [];
        const numSegments = 100;
        const segmentWidth = VIEWBOX_WIDTH / numSegments;

        waveOffset += 1; 
        if (waveOffset > WAVE_LENGTH) waveOffset = 0;
        
        path.push(`M0 ${VIEWBOX_HEIGHT}`); // Start bottom left
        
        // Draw the top wave line
        for (let i = 0; i <= numSegments; i++) {
            const x = i * segmentWidth;
            const waveAmplitude = WAVE_HEIGHT * Math.min(1, currentProgress * 2);
            const y = baseLevelY + Math.sin((x + waveOffset) / WAVE_LENGTH * 2 * Math.PI) * waveAmplitude;
            path.push(`L${x} ${y}`);
        }
        
        path.push(`L${VIEWBOX_WIDTH} ${VIEWBOX_HEIGHT}`); // Line down to the bottom right
        path.push(`Z`); // Close the path

        liquidWave.setAttribute('d', path.join(' '));
    }


    /**
     * Starts the heart filling animation and result display.
     */
    function startLoveTest() {
        const boyName = boyNameInput.value.trim();
        const girlName = girlNameInput.value.trim();

        if (boyName === "" || girlName === "") {
            showErrorMessage("Please enter both names.");
            return;
        }

        // Key change: Set height for demonstration
        mobileScreen.classList.remove('h-compact');
        mobileScreen.classList.add('h-full-app');


        // 1. Transition to the demo section
        centerSvg.classList.add('hidden'); // NEW: Hide centerpiece SVG
        inputSection.classList.add('hidden');
        demoSection.classList.remove('hidden');
        
        // Reset text before starting
        resultText.textContent = "0%";
        resultText.style.opacity = '1';
        loadingMessage.textContent = `Checking the love between ${boyName} and ${girlName}...`;
        finalMessage.style.opacity = '0';
        showQuotesButton.classList.add('hidden');


        // 2. Generate result
        finalPercentage = generateLovePercentage(); 
        targetFillY = VIEWBOX_HEIGHT - (VIEWBOX_HEIGHT * finalPercentage / 100); 

        // 3. Start wave animation loop
        startTime = null;
        animationProgress = 0;
        isWaveAnimating = true; // Start animation flag
        resultsShown = false; // Ensure it can be shown
        requestAnimationFrame(drawWave);
    }

    /**
     * Returns the appropriate final message based on the percentage.
     */
    function getFinalMessage(percentage) {
        if (percentage >= 98) {
            return "True, perfect love! It's fate! Your hearts are a perfect match. üíñ‚ú®";
        } else if (percentage >= 95) {
            return "Unmatched compatibility. Your connection is designed for greatness. üíç‚ù§Ô∏è";
        } else if (percentage >= 90) {
            return "Strong and passionate love! A connection that is truly incredible. üî•üíë";
        } else {
            return "A solid foundation for a long and happy life. üíêüòä";
        }
    }

    /**
     * –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –¥–æ–¥–∞—Ç–∫–∞: –ø—Ä–∏–∫—Ä—ñ–ø–ª–µ–Ω–Ω—è –ø—Ä–æ—Å–ª—É—Ö–æ–≤—É–≤–∞—á—ñ–≤ –ø–æ–¥—ñ–π.
     */
    function initApp() {
        // --- Event Listeners ---
        checkButton.addEventListener('click', startLoveTest);
        quoteCloseButton.addEventListener('click', closeQuoteModal);
        showQuotesButton.addEventListener('click', showQuoteModal);
        
        // –í–∏–∫–ª–∏–∫–∞—î–º–æ –ø–æ—á–∞—Ç–∫–æ–≤–∏–π —Å–±—Ä–æ—Å —Å—Ç–∞–Ω—É
        resetDemo();
    }

    // –ó–∞–ø—É—Å–∫–∞—î–º–æ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—é –ø—ñ—Å–ª—è –ø–æ–≤–Ω–æ–≥–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏
    window.onload = initApp; 
</script>
</body>
</html>
